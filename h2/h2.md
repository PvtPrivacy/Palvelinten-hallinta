# h2 Soitto kotiin

  - x) Lue ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva. Kannattaa lisätä mukaan myös jokin oma havainto, idea tai kysymys.)
        Karvinen 2021: Two Machine Virtual Network With Debian 11 Bullseye and Vagrant
        Karvinen 2018: Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux
        Karvinen 2014: Hello Salt Infra-as-Code
  - a) Asenna kaksi virtuaalikonetta samaan verkkoon. Osoita, että pystyt käyttämään kumpaakin konetta (esim 'vagrant ssh t001'). Osoita, että koneet voivat pingata toisiaan. (Tämä tehtävä on helpointa tehdä Vagrantilla)
  - b) Asenna Saltin herra-orja arkkitehtuuri toimimaan verkon yli. (Verkko voi olla virtuaalinen verkko paikallisten virtuaalikoneiden välillä, kuten muissakin alakohdissa)
  - c) Aja shell-komento orjalla Saltin master-slave yhteyden yli.
  - d) Aja useita idempotentteja (state.single) komentoja master-slave yhteyden yli.
  - e) Kerää teknistä tietoa orjista verkon yli (grains.item)
  - f) Hello, IaC. Tee infraa koodina kirjoittamalla /srv/salt/hello/init.sls. Aja tila jollekin orjalle. Tila voi esimerkiksi tehdä esimerkkitiedoston johonkin hakemistoon. Testaa toisella komennolla, että pyytämäsi muutos on todella tehty.



# x) 
- Two Machine Virtual Network With Debian 11 Bulleye and Vagrant
  -  To install Vagrant
      - `$ sudo apt-get update`
      - `$ sudo apt-get install vagrant virtualbox`
   - When it comes to Windows, you should install it via installer.
    
- Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux
  - To install the Salt Master:
    - `master$ sudo apt-get update`
    - `master$ sudo apt-get -y install salt-master`
    - `master$ hostname -I`
    - `10.0.0.88`
  - To install just the Slave:
    - `slave$ sudo apt-get update`
    - `slave$ sudo apt-get -y install salt-minion`
  - Slave can be assgigned with a name, otherwise it's name will be automatically generated from hostname
  - To make slave connect to master and use your new settings, we must restart the slave (minion duh) daemon.
    - `slave$ sudo systemctl restart salt-minion.service`
 - Hello Salt Infra-as-Code
     - `$ sudo apt-get update`
     -  `$ sudo apt-get -y install salt-minion`
  
# H1 A

In the previously assignment, I couldn't get my virtual machine to work properly, but after few tries and wall smashing I managed to solve the issue that was causing the virtual machine not to work properly, and it was because of a minor misspelling that caused the whole system not to work properly.

![image](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/4698715f-5c6d-4e01-bac7-15a26e3e5a62)

![image](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/f7f34857-ba46-4454-9b1a-8b97bb0c6219)

![image](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/dd0b5fb0-c2ac-4a34-86b0-5e808b4d9894)

# A

In this part, I must create virtual machines in a network, because I have already vagrant file created, I just swapped the lines with the new lines that I am instructued to insert.

![kuva](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/0a30f463-d55c-4304-a546-ddbbf7226074)

After copypasting and saving the file, I launched the vagrant via `vagrant up` command. It took couple of seconds for it to work, but eventually everything was up.

I then logged to the `$ vagrant ssh t001`
In my first attempt it failed to login, because I intialized it way too early, but after waiting couple of seconds I did second login attempt which was succesful.

I immediately went on checking if both hosts can connect to both each other and the internet.

![kuva](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/280b77eb-85bd-43a3-a13b-07b925eae93e)

And then the internet itself via t001 host.

![kuva](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/7d239e76-757b-4343-ae67-dbf154c4a714)

I then did all the steps again, but now with t002 host. Before I could connect to t002 I must exit from t001 host.

`exit`

After that, I logged to the t002.
`$ vagrant ssh t002`

Then I pinged both t001 and internet, all of them were succesfully pinged via t002.

![kuva](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/f3b43fc7-901c-4464-9567-9cd19a52f200)

B# 

Instead of destroying those virtual machines I created spesfically for the A. assignment, I decided to keep them for the couple of tasks. 

I logged to the t001

I then installt Salt-Master

`sudo apt-get update`
`sudo apt-get -y install salt-master`
`hostname -I`
`270.0.1.1`

![kuva](https://github.com/PvtPrivacy/Palvelinten-hallinta/assets/156780345/d8c48745-3a67-426f-bab7-16a9e25e6d28)


I logged to t002 as well.

`sudo apt-get update`
`sudo apt-get -y install salt-minion`

Now we must make sure that minion knows whos master he belongs to.

So while in control of t002 host, I configure the settings

`sudoedit /etc/salt/minion`

Where I add the following command 

`master: 10.0.0.88
id: tero`


    
